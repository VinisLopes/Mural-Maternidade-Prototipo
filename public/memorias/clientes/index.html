<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Portal da Família • Mural do Bebê</title>

<style>
:root{
  --bg:#f6f9ff;
  --paper:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --primary:#3b82f6; 
  --primary-50:#eef3ff;
  --primary-200:#bfdbfe;
  --primary-600:#2563eb;
  --accent:#ec4899; 
  --line:#e2e8f0;
  --shadow:0 14px 34px rgba(15,23,42,.12);
  --radius:20px;
}
*,
*::before,
*::after{box-sizing:border-box;margin:0;padding:0}
html,body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:var(--bg);color:var(--text);}
body{min-height:100vh;}
.page{min-height:100vh;display:flex;flex-direction:column;}
header{
  background:#fff;
  border-bottom:1px solid var(--line);
  height:70px;
  display:flex;
  align-items:center;
  position:sticky;
  top:0;
  z-index:10;
}
.header-inner{
  max-width:1180px;
  width:100%;
  margin:0 auto;
  padding:0 1.4rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.logo{
  display:flex;
  align-items:center;
  gap:.7rem;
}
.logo-mark{
  width:38px;
  height:38px;
  border-radius:12px;
  background:
    radial-gradient(circle at 0 0,#93c5fd,transparent 55%),
    radial-gradient(circle at 100% 100%,#a5f3fc,transparent 55%),
    var(--primary);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#eff6ff;
  font-weight:700;
  letter-spacing:.08em;
  font-size:.8rem;
}
.logo-text{
  display:flex;
  flex-direction:column;
}
.logo-text strong{font-size:.95rem;}
.logo-text span{font-size:.75rem;color:var(--muted);}
.header-links{
  display:flex;
  gap:.6rem;
  font-size:.8rem;
}
.header-links a{
  text-decoration:none;
  color:var(--primary-600);
}
main{
  flex:1;
  padding:1.8rem 0 2.4rem;
}
.grid{
  max-width:1180px;
  margin:0 auto;
  padding:0 1.4rem;
  display:grid;
  grid-template-columns:1.1fr 1.1fr;
  gap:1.5rem;
}
.card{
  background:var(--paper);
  border-radius:var(--radius);
  border:1px solid var(--line);
  box-shadow:var(--shadow);
  padding:1.5rem 1.8rem;
}
.card-title{
  font-size:1.25rem;
  margin-bottom:.5rem;
}
.card-sub{
  font-size:.86rem;
  color:var(--muted);
  margin-bottom:1.1rem;
}
.resume{
  border-radius:16px;
  background:var(--primary-50);
  border:1px solid var(--primary-200);
  padding:1rem 1.1rem;
  margin-bottom:1.1rem;
}
.resume-title{
  font-size:.86rem;
  color:var(--muted);
  margin-bottom:.2rem;
}
.resume-name{
  font-size:1.02rem;
  font-weight:600;
}
.resume-meta{
  font-size:.82rem;
  color:var(--muted);
  margin-top:.15rem;
}
.field-group{margin-bottom:.75rem;}
label{
  display:block;
  font-size:.82rem;
  margin-bottom:.2rem;
  color:var(--muted);
}
input,textarea,select{
  width:100%;
  padding:.65rem .8rem;
  border-radius:12px;
  border:1px solid var(--primary-200);
  font-size:.86rem;
  background:#fff;
}
textarea{resize:vertical;}
.tabs{
  display:flex;
  gap:.4rem;
  margin:1rem 0 .9rem;
}
.tab{
  padding:.4rem .9rem;
  border-radius:999px;
  font-size:.82rem;
  border:1px solid transparent;
  background:var(--primary-50);
  color:var(--primary-600);
  cursor:pointer;
}
.tab.active{
  background:var(--primary-600);
  color:#fff;
}
.tab-panel{display:none;}
.tab-panel.active{display:block;}
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:999px;
  border:none;
  padding:.7rem 1.2rem;
  font-size:.88rem;
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(135deg,var(--primary-600),var(--primary));
  color:#fff;
  width:100%;
  margin-top:.9rem;
}
.list-card{
  border-radius:var(--radius);
  border:1px dashed var(--line);
  background:#f8fafc;
  padding:1.1rem 1.2rem;
  min-height:230px;
}
.list-empty{
  font-size:.84rem;
  color:var(--muted);
}
.item{
  border-radius:14px;
  background:#fff;
  border:1px solid var(--line);
  padding:.7rem .9rem;
  font-size:.84rem;
  margin-bottom:.55rem;
  cursor:pointer;
}
.item small{
  display:block;
  margin-top:.2rem;
  color:var(--muted);
  font-size:.75rem;
}
.item.selected{
  border-color:var(--primary-200);
  background:var(--primary-50);
}
.preview{
  margin-top:1rem;
  border-radius:16px;
  border:1px dashed var(--line);
  background:#f1f5f9;
  padding:1rem 1.1rem;
  min-height:170px;
}
.preview-title{
  font-size:.85rem;
  font-weight:600;
  margin-bottom:.4rem;
  color:#475569;
}
.preview-text-only{
  font-size:.88rem;
  color:#0f172a;
  line-height:1.5;
}
.preview-gallery{
  display:flex;
  align-items:center;
  gap:.6rem;
  margin-bottom:.6rem;
}
.preview-main{
  flex:1;
  border-radius:14px;
  background:#0f172a;
  padding:.4rem;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:150px;
  overflow:hidden;
}
.preview-main img{
  max-width:100%;
  max-height:220px;
  border-radius:12px;
  object-fit:cover;
}
.preview-media-placeholder{
  width:100%;
  text-align:center;
  color:#e5e7eb;
  font-size:.86rem;
}
.preview-nav{
  width:30px;
  height:30px;
  border-radius:999px;
  border:none;
  background:#e2e8f0;
  color:#0f172a;
  font-size:1.1rem;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.preview-nav:disabled{
  opacity:.4;
  cursor:default;
}
.preview-dots{
  display:flex;
  gap:.3rem;
  margin-bottom:.4rem;
}
.preview-dot{
  width:7px;
  height:7px;
  border-radius:999px;
  background:#cbd5e1;
}
.preview-dot.active{
  width:14px;
  background:var(--primary);
}
.preview-desc{
  font-size:.82rem;
  color:#64748b;
}
.side-note{
  font-size:.78rem;
  color:var(--muted);
  margin-top:.75rem;
}
@media (max-width:900px){
  .grid{
    grid-template-columns:1fr;
  }
}
@media (max-width:600px){
  .header-inner{padding:0 .9rem;}
  .grid{padding:0 .9rem;}
}
</style>
</head>
<body>
<div class="page">

<header>
  <div class="header-inner">
    <div class="logo">
      <div class="logo-mark">SC</div>
      <div class="logo-text">
        <strong>SANTA CASA</strong>
        <span>Portal da Família</span>
      </div>
    </div>

    <div class="header-links">
      <a href="../../index.html">Voltar ao site do serviço</a>
      <span>•</span>
      <a href="../../memorial.html">Ver modo TV (exemplo)</a>
      </div>
  </div>
</header>

<main>
  <div class="grid">

    <section class="card">
      <h2 class="card-title">Mural do bebê</h2>
      <p class="card-sub">
        Preencha os dados abaixo para identificar o bebê.
        Depois adicione fotos, vídeos e mensagens de carinho ao mural.
      </p>

      <div class="resume">
        <div class="resume-title">Resumo do bebê</div>
        <div class="resume-name" id="resNome">Nome do bebê</div>
        <div class="resume-meta" id="resAnos">Data de nascimento • Peso</div>
        <div class="resume-meta" id="resFrase">Frase de boas-vindas.</div>
        <div class="resume-meta" id="resResp">Responsável: —</div>
      </div>

      <div class="field-group">
        <label for="bebeNome">Nome completo do bebê</label>
        <input id="bebeNome" type="text" placeholder="Ex: Maria Alice da Silva">
      </div>

      <div class="field-group">
        <label for="bebeNasc">Data de nascimento</label>
        <input id="bebeNasc" type="text" placeholder="Ex: 15/11/2025">
      </div>

      <div class="field-group">
        <label for="bebePeso">Peso e altura</label>
        <input id="bebePeso" type="text" placeholder="Ex: 3.210kg • 49cm">
      </div>

      <div class="field-group">
        <label for="bebeFrase">Frase de boas-vindas</label>
        <input id="bebeFrase" type="text" placeholder="Ex: “Nossa alegria chegou!”">
      </div>

      <div class="field-group">
        <label for="responsavel">Responsável pelo mural (Ex: Mãe, Pai)</label>
        <input id="responsavel" type="text" placeholder="Ex: mamãe Ana">
      </div>

      <div class="tabs">
        <button class="tab active" data-tab="fotos">Fotos</button>
        <button class="tab" data-tab="videos">Galeria (até 5 fotos/vídeos)</button>
        <button class="tab" data-tab="textos">Mensagens</button>
      </div>

      <div class="tab-panel active" data-panel="fotos">
        <div class="field-group">
          <label for="fotoArquivo">Foto</label>
          <input id="fotoArquivo" type="file" accept="image/*">
        </div>
        <div class="field-group">
          <label for="fotoMensagem">Mensagem sobre esta foto</label>
          <textarea id="fotoMensagem" rows="3" placeholder="Ex: A primeira foto com a mamãe."></textarea>
        </div>
        <button class="btn" id="btnAddFoto">Adicionar foto ao mural</button>
      </div>

      <div class="tab-panel" data-panel="videos">
        <div class="field-group">
          <label for="videoArquivos">Galeria de fotos/vídeos (até 5 arquivos)</label>
          <input id="videoArquivos" type="file" accept="image/*,video/*" multiple>
          <small style="font-size:.78rem;color:#64748b;display:block;margin-top:.25rem;">
            Selecione até 5 arquivos (fotos ou vídeos) de uma vez.
          </small>
        </div>
        <div class="field-group">
          <label for="videoMensagem">Mensagem associada à galeria</label>
          <textarea id="videoMensagem" rows="3" placeholder="Ex: Mensagens em vídeo dos avós."></textarea>
        </div>
        <button class="btn" id="btnAddVideo">Adicionar galeria ao mural</button>
      </div>

      <div class="tab-panel" data-panel="textos">
        <div class="field-group">
          <label for="textoTitulo">Título da mensagem</label>
          <input id="textoTitulo" type="text" placeholder="Ex: Dos avós, dos tios, etc.">
        </div>
        <div class="field-group">
          <label for="textoConteudo">Conteúdo</label>
          <textarea id="textoConteudo" rows="4" placeholder="Escreva aqui a mensagem de boas-vindas."></textarea>
        </div>
        <button class="btn" id="btnAddTexto">Adicionar mensagem ao mural</button>
      </div>

    </section>

    <section class="card">
      <h2 class="card-title">Mural do bebê</h2>
      <p class="card-sub">
        Estes são os itens que poderão aparecer na TV do quarto, após aprovação da Maternidade.
      </p>

      <div class="list-card" id="listaMural">
        <p class="list-empty">
          Nenhum item foi adicionado ainda. Comece incluindo uma foto, galeria ou mensagem usando o painel ao lado.
        </p>
      </div>

      <div class="preview" id="previewArea">
        <div class="preview-title">Pré-visualização do item selecionado</div>
        <p class="preview-text-only" style="font-size:.84rem;color:#64748b;">
          Clique em um item da lista acima para ver os detalhes aqui, incluindo navegação pelas fotos da galeria.
        </p>
      </div>

      <p class="side-note">
        Obs.: este é um protótipo. Em uma versão completa, estes itens seriam enviados para o Painel da
        Maternidade, que escolheria o que será exibido em cada TV.
      </p>
    </section>

  </div>
</main>
</div>

<script>
function atualizarResumo(){
  const nome = document.getElementById('bebeNome').value || 'Nome do bebê';
  const nasc = document.getElementById('bebeNasc').value || 'Data de nascimento';
  const peso = document.getElementById('bebePeso').value || 'Peso';
  const frase= document.getElementById('bebeFrase').value || 'Frase de boas-vindas.';
  const resp = document.getElementById('responsavel').value || '—';

  document.getElementById('resNome').textContent = nome;
  document.getElementById('resAnos').textContent = `${nasc} • ${peso}`;
  document.getElementById('resFrase').textContent = frase;
  document.getElementById('resResp').textContent  = `Responsável: ${resp}`;
}

['bebeNome','bebeNasc','bebePeso','bebeFrase','responsavel']
  .forEach(id=>{
    document.getElementById(id).addEventListener('input',atualizarResumo);
  });

const tabs = document.querySelectorAll('.tab');
const panels = document.querySelectorAll('.tab-panel');
tabs.forEach(tab=>{
  tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    panels.forEach(p=>p.classList.remove('active'));
    tab.classList.add('active');
    document.querySelector(`.tab-panel[data-panel="${tab.dataset.tab}"]`).classList.add('active');
  });
});

let mural = [];
let previewIndex = null;
let previewSlide = 0;

function renderLista(){
  const lista = document.getElementById('listaMural');
  lista.innerHTML = '';

  if(mural.length === 0){
    lista.innerHTML = `<p class="list-empty">Nenhum item foi adicionado ainda.</p>`;
    document.getElementById('previewArea').innerHTML = `
      <div class="preview-title">Pré-visualização do item selecionado</div>
      <p class="preview-text-only" style="font-size:.84rem;color:#64748b;">
        Clique em um item da lista acima para ver os detalhes aqui, incluindo navegação pelas fotos da galeria.
      </p>`;
    previewIndex = null;
    return;
  }

  mural.forEach((item,i)=>{
    const div = document.createElement('div');
    div.className = 'item';
    div.dataset.index = i;
    div.innerHTML = `<strong>${item.tipo}</strong><small>${item.desc}</small>`;
    div.addEventListener('click',()=>{
      document.querySelectorAll('.item').forEach(el=>el.classList.remove('selected'));
      div.classList.add('selected');
      showPreview(i);
    });
    lista.appendChild(div);
  });

  if(previewIndex === null){
    const first = lista.querySelector('.item');
    if(first){
      first.classList.add('selected');
      showPreview(0);
    }
  }
}

function showPreview(index){
  previewIndex = index;
  previewSlide = 0;

  const area = document.getElementById('previewArea');
  const item = mural[index];

  if(!item.arquivos || item.arquivos.length === 0){
    area.innerHTML = `
      <div class="preview-title">${item.tipo}</div>
      <div class="preview-text-only">${item.desc}</div>
    `;
    return;
  }

  const qtd = item.arquivos.length;
  const isGaleria = qtd > 1;

  let dotsHtml = '';
  if(isGaleria){
    for(let i=0;i<qtd;i++){
      dotsHtml += `<span class="preview-dot ${i===0?'active':''}" data-dot="${i}"></span>`;
    }
  }

  area.innerHTML = `
    <div class="preview-title">
      ${isGaleria ? `Galeria (${qtd} itens)` : item.tipo}
    </div>
    <div class="preview-gallery">
      <button class="preview-nav prev" aria-label="Anterior">&#10094;</button>
      <div class="preview-main"></div>
      <button class="preview-nav next" aria-label="Próximo">&#10095;</button>
    </div>
    <div class="preview-dots">${dotsHtml}</div>
    <div class="preview-desc">${item.desc}</div>
  `;

  const prevBtn = area.querySelector('.preview-nav.prev');
  const nextBtn = area.querySelector('.preview-nav.next');

  if(!isGaleria){
    prevBtn.disabled = true;
    nextBtn.disabled = true;
    const dotsContainer = area.querySelector('.preview-dots');
    if(dotsContainer) dotsContainer.style.display = 'none';
  }

  prevBtn.addEventListener('click',()=>{
    if(previewSlide > 0){
      previewSlide--;
      renderPreviewMedia();
    }
  });
  nextBtn.addEventListener('click',()=>{
    if(previewSlide < item.arquivos.length-1){
      previewSlide++;
      renderPreviewMedia();
    }
  });

  area.querySelectorAll('.preview-dot').forEach(dot=>{
    dot.addEventListener('click',()=>{
      const idx = Number(dot.dataset.dot);
      previewSlide = idx;
      renderPreviewMedia();
    });
  });

  renderPreviewMedia();
}

function renderPreviewMedia(){
  if(previewIndex === null) return;
  const item = mural[previewIndex];
  if(!item || !item.arquivos || !item.arquivos.length) return;

  const area = document.getElementById('previewArea');
  const main = area.querySelector('.preview-main');
  const file = item.arquivos[previewSlide];

  if(!main || !file) return;

  if(file.type.startsWith('image/')){
    main.innerHTML = `<img src="${file.url}" alt="Imagem da galeria">`;
  }else{
    main.innerHTML = `
      <div class="preview-media-placeholder">
        Prévia de vídeo (exibição completa será feita na TV do quarto).
      </div>
    `;
  }

  area.querySelectorAll('.preview-dot').forEach((d,i)=>{
    d.classList.toggle('active', i===previewSlide);
  });
}

document.getElementById('btnAddFoto').addEventListener('click',()=>{
  const arq = document.getElementById('fotoArquivo').files[0];
  const msg = document.getElementById('fotoMensagem').value.trim();
  if(!arq){ alert('Selecione uma foto para adicionar.'); return; }
  mural.push({
    tipo:'Foto',
    desc: msg || 'Foto adicionada ao mural.',
    arquivos:[{url:URL.createObjectURL(arq), type:arq.type}]
  });
  document.getElementById('fotoArquivo').value = '';
  document.getElementById('fotoMensagem').value = '';
  renderLista();
});

document.getElementById('btnAddVideo').addEventListener('click',()=>{
  const input = document.getElementById('videoArquivos');
  const files = Array.from(input.files || []);
  const msg = document.getElementById('videoMensagem').value.trim();
  if(files.length === 0){ alert('Selecione pelo menos um arquivo para a galeria.'); return; }
  if(files.length > 5){ alert('Você pode enviar no máximo 5 arquivos por galeria.'); return; }
  const arquivos = files.map(f=>({
    url:URL.createObjectURL(f),
    type:f.type || ''
  }));
  const temVideo = arquivos.some(a=>a.type.startsWith('video/'));
  const tipo = temVideo ? 'Galeria (fotos / vídeos)' : 'Galeria de fotos';
  mural.push({
    tipo,
    desc: msg || 'Galeria adicionada ao mural.',
    arquivos
  });
  input.value = '';
  document.getElementById('videoMensagem').value = '';
  renderLista();
});

document.getElementById('btnAddTexto').addEventListener('click',()=>{
  const titulo = document.getElementById('textoTitulo').value.trim();
  const conteudo = document.getElementById('textoConteudo').value.trim();
  if(!conteudo){ alert('Digite a mensagem.'); return; }
  mural.push({
    tipo:'Mensagem',
    desc: titulo ? `${titulo}: ${conteudo}` : conteudo,
    arquivos:[]
  });
  document.getElementById('textoTitulo').value = '';
  document.getElementById('textoConteudo').value = '';
  renderLista();
});
</script>
</body>
</html>